/* Mobile Fixes - Among Us V3 */

/* Fix viewport issues on mobile devices */
@media screen and (max-width: 768px) {
    html {
        /* Prevent zoom on input focus */
        -webkit-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
        /* Fix viewport height on mobile browsers */
        height: 100%;
        height: -webkit-fill-available;
    }
    
    body {
        /* Use the full available height */
        height: 100vh;
        height: -webkit-fill-available;
        /* Prevent scrolling */
        overflow: hidden;
        /* Fix position on mobile */
        position: fixed;
        width: 100%;
        top: 0;
        left: 0;
    }
    
    .app-container {
        /* Ensure full coverage */
        width: 100vw;
        height: 100vh;
        height: -webkit-fill-available;
        /* Fix positioning */
        position: relative;
        overflow: hidden;
    }
    
    .screen {
        /* Full viewport coverage */
        width: 100vw;
        height: 100vh;
        height: -webkit-fill-available;
        /* Fix positioning */
        position: absolute;
        top: 0;
        left: 0;
    }
    
    /* Loading screen fixes */
    .loading-screen {
        width: 100vw;
        height: 100vh;
        height: -webkit-fill-available;
        position: fixed;
        top: 0;
        left: 0;
    }
    
    /* Game screen fixes */
    #game-screen {
        width: 100vw;
        height: 100vh;
        height: -webkit-fill-available;
    }
    
    .game-container {
        width: 100%;
        height: 100%;
        position: relative;
        overflow: hidden;
    }
    
    #game-canvas {
        width: 100vw !important;
        height: 100vh !important;
        height: -webkit-fill-available !important;
        display: block;
        position: absolute;
        top: 0;
        left: 0;
    }
    
    /* Menu fixes */
    #main-menu-v3 {
        width: 100vw;
        height: 100vh;
        height: -webkit-fill-available;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .menu-container-v3 {
        min-height: 100vh;
        min-height: -webkit-fill-available;
        padding: 1rem;
        box-sizing: border-box;
    }
    
    /* Fix for iOS Safari address bar */
    @supports (-webkit-touch-callout: none) {
        .app-container,
        .screen,
        .loading-screen,
        #game-screen,
        #main-menu-v3 {
            height: -webkit-fill-available;
        }
    }
}

/* Landscape mobile fixes */
@media screen and (max-width: 768px) and (orientation: landscape) {
    .menu-container-v3 {
        padding: 0.5rem;
    }
    
    .loading-content {
        padding: 1rem;
    }
    
    .crewmate-loader {
        width: 80px;
        height: 80px;
    }
    
    .loading-title {
        font-size: 1.5rem;
        margin: 0.5rem 0;
    }
}

/* Fix for Android Chrome */
@media screen and (max-width: 768px) {
    /* Prevent address bar from affecting layout */
    .app-container {
        min-height: 100vh;
        min-height: -webkit-fill-available;
    }
    
    /* Ensure canvas covers full screen */
    #game-canvas {
        object-fit: cover;
        object-position: center;
    }
}

/* Fix for very small screens */
@media screen and (max-width: 480px) {
    .loading-content {
        padding: 1rem;
        max-width: 90vw;
    }
    
    .menu-container-v3 {
        padding: 0.5rem;
    }
    
    .action-card-v3 {
        min-height: 80px;
    }
    
    .card-content h3 {
        font-size: 1rem;
    }
    
    .card-content p {
        font-size: 0.8rem;
    }
}

/* Fix touch interactions */
@media (hover: none) and (pointer: coarse) {
    /* Improve touch targets */
    .action-card-v3 {
        min-height: 60px;
        padding: 1rem;
    }
    
    .menu-btn,
    .btn-large {
        min-height: 48px;
        padding: 0.75rem 1.5rem;
    }
    
    /* Remove hover effects that don't work on touch */
    .action-card-v3:hover {
        transform: none;
    }
    
    /* Add touch feedback */
    .action-card-v3:active {
        transform: scale(0.98);
        transition: transform 0.1s ease;
    }
}

/* Fix for notched devices (iPhone X and similar) */
@media screen and (max-width: 768px) {
    .app-container {
        /* Account for safe areas */
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
        
        /* Adjust height accordingly */
        height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
        height: calc(-webkit-fill-available - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    }
    
    .screen {
        height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
        height: calc(-webkit-fill-available - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    }
    
    #game-canvas {
        height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom)) !important;
        height: calc(-webkit-fill-available - env(safe-area-inset-top) - env(safe-area-inset-bottom)) !important;
    }
}

/* Prevent zoom on input focus */
input, select, textarea {
    font-size: 16px !important;
}

/* Fix for PWA mode */
@media all and (display-mode: standalone) {
    .app-container {
        height: 100vh;
        height: -webkit-fill-available;
    }
}