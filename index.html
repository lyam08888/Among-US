<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Among Us - Mobile Game</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸš€</text></svg>">
    
    <!-- Unified Styles -->
    <link rel="stylesheet" href="styles/clean-main.css">
    <link rel="stylesheet" href="styles/clean-mobile.css">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="assets/sounds/ambient.mp3" as="audio">
    <link rel="preload" href="assets/sounds/button-click.mp3" as="audio">
</head>
<body>
    <div id="app" class="app-container">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen active">
            <div class="loading-content">
                <div class="loading-logo">
                    <div class="crewmate-simple">
                        <div class="crewmate-body"></div>
                        <div class="crewmate-visor"></div>
                    </div>
                </div>
                <h1 class="loading-title">AMONG US</h1>
                <div class="loading-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="loading-progress-fill"></div>
                    </div>
                    <div class="loading-text" id="loading-text">Chargement...</div>
                </div>
            </div>
        </div>

        <!-- Main Menu - Ã‰purÃ© -->
        <div id="main-menu" class="screen">
            <div class="menu-container">
                <!-- Header Simple -->
                <header class="menu-header">
                    <div class="logo-simple">
                        <div class="crewmate-icon">
                            <div class="crewmate-body"></div>
                            <div class="crewmate-visor"></div>
                        </div>
                        <h1 class="game-title">AMONG US</h1>
                    </div>
                    
                    <!-- User Profile Compact -->
                    <div class="user-profile-compact">
                        <div class="profile-avatar">
                            <div class="avatar-crewmate"></div>
                        </div>
                        <button class="settings-btn" data-action="settings">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                </header>

                <!-- Actions Principales - Seulement 3 -->
                <div class="main-actions">
                    <button class="action-btn primary" data-action="quick-play">
                        <div class="btn-icon">
                            <i class="fas fa-play"></i>
                        </div>
                        <div class="btn-content">
                            <h3>Jouer</h3>
                            <p>Partie rapide</p>
                        </div>
                    </button>

                    <button class="action-btn secondary" data-action="create-room">
                        <div class="btn-icon">
                            <i class="fas fa-plus"></i>
                        </div>
                        <div class="btn-content">
                            <h3>CrÃ©er</h3>
                            <p>Nouvelle partie</p>
                        </div>
                    </button>

                    <button class="action-btn secondary" data-action="join-room">
                        <div class="btn-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="btn-content">
                            <h3>Rejoindre</h3>
                            <p>Code de partie</p>
                        </div>
                    </button>
                </div>

                <!-- Menu Secondaire - CachÃ© par dÃ©faut -->
                <div class="secondary-menu" id="secondary-menu">
                    <button class="secondary-btn" data-action="training">
                        <i class="fas fa-graduation-cap"></i>
                        <span>EntraÃ®nement</span>
                    </button>
                    <button class="secondary-btn" data-action="cosmetics">
                        <i class="fas fa-palette"></i>
                        <span>CosmÃ©tiques</span>
                    </button>
                    <button class="secondary-btn" data-action="stats">
                        <i class="fas fa-chart-bar"></i>
                        <span>Statistiques</span>
                    </button>
                </div>

                <!-- Toggle pour menu secondaire -->
                <button class="menu-toggle" id="menu-toggle" data-action="toggle-secondary">
                    <i class="fas fa-ellipsis-h"></i>
                    <span>Plus d'options</span>
                </button>

                <!-- Status Bar SimplifiÃ© -->
                <div class="status-bar">
                    <div class="status-item">
                        <div class="status-indicator online"></div>
                        <span id="online-players">12,543 joueurs</span>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-wifi"></i>
                        <span id="ping-value">23ms</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-container">
                <!-- Game Canvas -->
                <canvas id="game-canvas" width="1920" height="1080"></canvas>
                
                <!-- Game UI Overlay - Ã‰purÃ© -->
                <div class="game-ui-overlay">
                    <!-- Top HUD Compact -->
                    <div class="top-hud">
                        <div class="game-info">
                            <div class="room-code">
                                <span id="current-room-code">ABCDEF</span>
                                <button class="copy-btn" data-action="copy-room-code">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                            <div class="game-timer">
                                <i class="fas fa-clock"></i>
                                <span id="game-timer">05:30</span>
                            </div>
                        </div>
                        
                        <div class="player-count">
                            <i class="fas fa-users"></i>
                            <span id="alive-players">8</span>/<span id="total-players">10</span>
                        </div>
                        
                        <div class="game-controls">
                            <button class="control-btn" data-action="toggle-map">
                                <i class="fas fa-map"></i>
                            </button>
                            <button class="control-btn" data-action="toggle-settings">
                                <i class="fas fa-cog"></i>
                            </button>
                            <button class="control-btn emergency" data-action="emergency-meeting">
                                <i class="fas fa-exclamation-triangle"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Task List Compact -->
                    <div class="task-list-compact" id="task-list">
                        <div class="task-header">
                            <h4>TÃ¢ches</h4>
                            <div class="task-progress">
                                <span id="task-progress-text">3/7</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="task-progress-fill"></div>
                                </div>
                            </div>
                        </div>
                        <div class="task-items" id="task-items">
                            <!-- Tasks populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Mobile Controls -->
                    <div class="mobile-controls" id="mobile-controls">
                        <!-- Joystick -->
                        <div class="joystick-container">
                            <div class="joystick" id="joystick">
                                <div class="joystick-knob" id="joystick-knob"></div>
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="action-buttons">
                            <button class="action-btn-mobile primary" id="use-btn" data-action="use">
                                <i class="fas fa-hand-paper"></i>
                            </button>
                            <button class="action-btn-mobile secondary" id="kill-btn" data-action="kill" style="display: none;">
                                <i class="fas fa-skull"></i>
                            </button>
                            <button class="action-btn-mobile secondary" id="sabotage-btn" data-action="sabotage" style="display: none;">
                                <i class="fas fa-wrench"></i>
                            </button>
                            <button class="action-btn-mobile tertiary" id="report-btn" data-action="report">
                                <i class="fas fa-exclamation"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Chat Compact -->
                    <div class="chat-compact" id="chat-container">
                        <div class="chat-toggle" id="chat-toggle">
                            <i class="fas fa-comments"></i>
                            <span class="chat-badge" id="chat-badge" style="display: none;">1</span>
                        </div>
                        <div class="chat-panel" id="chat-panel">
                            <div class="chat-messages" id="chat-messages"></div>
                            <div class="chat-input-container">
                                <input type="text" id="chat-input" placeholder="Tapez votre message..." maxlength="100">
                                <button id="chat-send" class="chat-send-btn">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Panel -->
        <div id="settings-panel" class="panel">
            <div class="panel-header">
                <h3>ParamÃ¨tres</h3>
                <button class="panel-close" data-action="close-settings">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="panel-content">
                <div class="setting-group">
                    <label>Volume Principal</label>
                    <input type="range" id="master-volume" min="0" max="100" value="70">
                </div>
                <div class="setting-group">
                    <label>Effets Sonores</label>
                    <input type="range" id="sfx-volume" min="0" max="100" value="80">
                </div>
                <div class="setting-group">
                    <label>QualitÃ© Graphique</label>
                    <select id="graphics-quality">
                        <option value="low">Faible</option>
                        <option value="medium" selected>Moyenne</option>
                        <option value="high">Ã‰levÃ©e</option>
                    </select>
                </div>
                <div class="setting-group">
                    <label>ContrÃ´les Mobiles</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="mobile-controls-toggle" checked>
                        <label for="mobile-controls-toggle"></label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Join Room Panel -->
        <div id="join-room-panel" class="panel">
            <div class="panel-header">
                <h3>Rejoindre une Partie</h3>
                <button class="panel-close" data-action="close-join-room">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="panel-content">
                <div class="input-group">
                    <label>Code de la Partie</label>
                    <input type="text" id="room-code-input" placeholder="ABCDEF" maxlength="6" autocomplete="off">
                </div>
                <button class="btn-primary" data-action="join-with-code">
                    <i class="fas fa-sign-in-alt"></i>
                    Rejoindre
                </button>
            </div>
        </div>

        <!-- Notifications -->
        <div id="notifications" class="notifications-container"></div>
    </div>

    <!-- Scripts -->
    <script src="js/v3-config.js"></script>
    <script src="js/v3-audio.js"></script>
    <script src="js/v3-graphics.js"></script>
    <script src="js/v3-physics.js"></script>
    <script src="js/v3-engine.js"></script>
    <script src="js/v3-maps.js"></script>
    <script src="js/v3-game-logic.js"></script>
    <script src="js/mobile-controls.js"></script>
    <script src="js/clean-app.js"></script>
</body>
</html>
